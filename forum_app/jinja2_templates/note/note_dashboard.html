{% extends "_layouts/_home.html" %}

{% block title %}Note{% endblock %}

{% block head_link %}{% endblock %}

{% block content %}

<div class="page-content">

  <!-- <div class="breadcrumb inline">
    <a href="/shared-data/dashboard">Dashboard</a>
    <span class="material-icons">chevron_right</span>
    <span>Market identifier codes</span>
  </div> -->

  <div class="container">

    <p class="work-in-progress">
      Work-in-progress.
    </p>

    <!-- <div class="footer action container">
      <div class="row">

        <div class="col s6"></div>
        <div class="col s6 right-align">
          <a href="/client/new" class="btn-floating btn-large waves-effect waves-light blue"><i class="material-icons">add</i></a>
        </div>
      </div>
    </div> -->

  </div>

</div>

{% endblock %}

{% block scripts %}
<script src="/js/jquery/jquery-3.5.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
    "use strict";

    (function ($) {
      var form_sent = false;

      // function updateFeatureToggle(event) {
      //     $.ajax({
      //       method: "POST",
      //       url: '/api/feature/toggle',
      //       contentType: "application/json; charset=utf-8",
      //       data: JSON.stringify({ 
      //         "feature_name": event.target.dataset["featureName"], 
      //         "value": event.target.checked
      //       })
      //     }).done(function( msg ) {
      //       M.toast({html: msg })
      //     }).fail(function(a, b, c) {
      //       M.toast({html: "An error has occurred" })
      //     }).always(function (a, b, c) {
      //     });
      // }

      // function postToggleUpdateForm(event) {
      //   console.debug("form_sent", form_sent);
      //   if (form_sent)
      //     return;

      //   var toggle_name = document.querySelector('#toggle_update_form__toggle_name');
      //   var toggle_value = document.querySelector('#toggle_update_form__toggle_value');
      //   toggle_name.value = event.target.dataset['featureName'];
      //   toggle_value.value = event.target.checked;
      //   document.getElementById("toggle_update_form").submit();
      //   form_sent = true;
      // }

      function roll_dice(event) {
        console.debug("roll_dice");
        
        var dice_number = document.querySelector('#dice_number').value;
        var dice_sides = document.querySelector('#dice_sides').value;

        console.debug(`${dice_number}, ${dice_sides}`);

        $.ajax({
            method: "POST",
            url: `/api/dice/roll/${dice_number}d${dice_sides}`
            // contentType: "application/json; charset=utf-8",
            // data: JSON.stringify({ 
            //   "feature_name": event.target.dataset["featureName"], 
            //   "value": event.target.checked
            // })
          }).done(function( msg ) {
            M.toast({html: msg })
          }).fail(function(a, b, c) {
            M.toast({html: "An error has occurred" })
          }).always(function (a, b, c) {
          });
      }

      // Need we figure out a better way refresh UI
      // $(document).on("change", "input.toggle", updateFeatureToggle);
      $(document).on("click", "#roll_button", roll_dice);
      
      // Kept for reference:
      // $(document).on("change", ".mdl-switch__input", postToggleUpdateForm);

    }(jQuery));

</script>
{% endblock %}