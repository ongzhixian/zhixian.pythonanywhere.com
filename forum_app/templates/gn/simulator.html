{% extends "_layouts/_skeleton_default.html" %}

{% block title %}Home{% endblock %}

{% block content -%}

<main style="display: grid; margin: 1em; grid-template-columns: 16em 1fr;">

    <nav class="nav-menu" aria-label="nav-menu" style="display: flex; flex-direction: column; align-self: 100%;">
        <span style="font-size:1.8em">Register</span>
        <a href="#">Company</a>
        <a href="#">Contract</a>
        <a href="#">Item 3</a>
        <span>&nbsp;</span>
        <span style="font-size:1.8em">Nominations</span>
        <span>item 3</span>
        <span>item 4</span>
        <span>&nbsp;</span>
        <span style="font-size:1.8em">Allocations</span>
        <span>item 3</span>
        <span>item 4</span>
    </nav>

    <article style="margin-left: 1em;">

        <section>
            
            <div id="fpsDisplay" style="position: absolute; top: 70px; left: 10px;">MY FPS</div>

            
            <div>
                <span id="clock">xxx</span>
            </div>
            
            <canvas id="canvas"></canvas>
        </section>

        <section>

            <h1>Announcements</h1>

            <ol>
                <li class="announcement" style="margin-left: 2.2em;">
                    <h1>New funds needed!</h1>
                    <p>
                        If you like this website, please donate!
                    </p>
                </li>
            </ol>

            <div class="announcement" style="margin-left: 2.2em;">
                <h1>Server maintenance</h1>
                <p>
                    A server maintenance will be conducted this Thursday from 1:00 AM to 1:15 AM SGTx
                </p>
            </div>

            <div class="announcement" style="margin-left: 2.2em;">
                <h1>Gnet feature deployment</h1>
                <p>

                    There will be a feature deployment for Gnet this Saturday from 1:00 AM to 1:15 AM SGT.<br />
                    The following features will be deployed:

                </p>

                <ol>
                    <li>Guest</li>
                    <li>Company registration</li>
                </ol>
            </div>
        </section>



    </article>


</main>

<footer style="align-self: stretch;">
    <div style="margin: 0 1em; display: flex; align-items: center; gap:1.2em; height: 100%;">
        <span>Last update 2023</span>
    </div>

</footer>

{% endblock %}

{%- block scripts %}
<script type="text/javascript">
"use strict";
(function() {

})();

let canvas;
let context;
let gameClockDisplay = document.getElementById("clock");
let fpsDisplay = document.getElementById("fpsDisplay");

window.onload = init;

function init(){
    canvas = document.getElementById('canvas');
    context = canvas.getContext('2d');

    // Start the first frame request
    window.requestAnimationFrame(gameLoop);
}

function draw(){
    // let randomColor = Math.random() > 0.5? '#ff8080' : '#0099b0';
    // context.fillStyle = randomColor;
    // context.fillRect(0, 100, 200, 175);
    gameClockDisplay.innerText = secondsPassed;
    fpsDisplay.innerText = fps;
}


let secondsPassed = 0;
let oldTimeStamp;
let fps;
let counter = 0;


function gameLoop(timeStamp) {
    window.requestAnimationFrame(gameLoop);

    // Calculate the number of seconds passed since the last frame
    secondsPassed = (timeStamp - oldTimeStamp) / 1000;
    oldTimeStamp = timeStamp;

    // // Calculate fps
    fps = Math.round(1 / secondsPassed);

    // // Draw number to the screen
    // context.fillStyle = 'white';
    // context.fillRect(0, 0, 200, 100);
    // context.font = '25px Arial';
    // context.fillStyle = 'black';
    // context.fillText("FPS: " + fps, 10, 30);
    // context.fillText("Counter: " + (counter++), 10, 60);

    // Perform the drawing operation
    draw();
}


</script>
{% endblock %}